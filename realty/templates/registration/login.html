{% extends 'realty/base.html' %}
{% block title %}Вход в систему{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <h2 class="mb-4">Вход в систему</h2>

        {% if form.errors %}
            <div class="alert alert-danger">
                Ваше имя пользователя и пароль не совпали. Пожалуйста, попробуйте снова.
            </div>
        {% endif %}

        {% if next %}
            {% if user.is_authenticated %}
                <div class="alert alert-warning">
                    У вас нет доступа к этой странице. Войдите с учетной записью, имеющей доступ.
                </div>
            {% else %}
                <div class="alert alert-info">
                    Пожалуйста, войдите, чтобы увидеть эту страницу.
                </div>
            {% endif %}
        {% endif %}

        <form method="post" action="{% url 'login' %}">
            {% csrf_token %}
            
            {% for field in form %}
            <div class="mb-3">
                <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
                {{ field }}
            </div>
            {% endfor %}
            
            <button type="submit" class="btn btn-primary">Войти</button>
            
            <input type="hidden" name="next" value="{{ next }}" />
        </form>
        
        <p class="mt-3">Нет аккаунта? <a href="{% url 'client_signup' %}">Зарегистрироваться как клиент</a>.</p>
        <p><a href="{% url 'password_reset' %}">Забыли пароль?</a></p>
    </div>
</div>
{% endblock %}